<!DOCTYPE html>
<!--[if IE 8]>
<html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]>
<html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en"> <!--<![endif]-->
<head>
    <title>Codurance - Resist the "Just in Case"</title>
    <link rel="stylesheet" href="/assets/css/syntax.css">


    <!-- Meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- CSS Global Compulsory-->
    <link rel="stylesheet" href="/assets/plugins/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/headers/header1.css">
    <link rel="stylesheet" href="/assets/css/responsive.css">
    <link rel="shortcut icon" href="favicon.ico">
    <!-- CSS Implementing Plugins -->
    <link rel="stylesheet" href="/assets/plugins/font-awesome/css/font-awesome.css">

    <link rel="stylesheet" href="/assets/css/pages/blog.css">
    <link rel="stylesheet" href="/assets/css/pages/page_magazine.css">

    <!-- CSS Theme -->
    <link rel="stylesheet" href="/assets/css/themes/orange.css" id="style_color">
    <link rel="stylesheet" href="/assets/css/themes/headers/header1-orange.css" id="style_color-header-1">

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-46289079-1', 'codurance.com');
        ga('send', 'pageview');

    </script>
</head>

<body>
<!--=== Style Switcher ===-->
<i class="style-switcher-btn icon-cogs hidden-xs"></i>

<div class="style-switcher">
    <div class="theme-close"><i class="icon-remove"></i></div>
    <div class="theme-heading">Layouts</div>
    <div class="text-center">
        <a href="#" class="btn-u btn-u-green btn-block active-switcher-btn wide-layout-btn">Wide</a>
        <a href="#" class="btn-u btn-u-green btn-block boxed-layout-btn">Boxed</a>
    </div>
</div>
<!--/style-switcher-->
<!--=== End Style Switcher ===-->

<div class="top">
    <div class="container">
    </div>
</div>
<!--/top-->
<!--=== End Top ===-->

<!--=== Header ===-->
<div class="header">
    <div class="navbar navbar-default" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">
                    <img id="logo-header" src="/assets/img/logo1-orange.png" height="45" alt="Logo">
                </a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse navbar-responsive-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown " >
                        <a href="/aboutus/ourcompany" class="dropdown-toggle" data-hover="dropdown" data-delay="0" data-close-others="false">
                          About Us
                            <i class="icon-angle-down"></i>
                        </a>
                        <ul class="dropdown-menu">
                            <li ><a href="/aboutus/ourteam">Our Team</a></li>
                            <li ><a href="/aboutus/ourcompany">Our Company</a></li>
                            <li ><a href="/aboutus/ourservices">Our Services</a></li>
                            <li ><a href="/aboutus/ourpractices">Our Practices</a></li>
                        </ul>
                    </li>
                    <li>
                        <a <li  href="/casestudies">Case Studies</a>
                    </li>
                    <li class="dropdown">
                        <a <li class="btn-u btn-u-orange" href="/blog">Blog</a>
                    </li>
                    <li class="dropdown">
                        <a <li  href="/careers/craftsman">Careers</a>
                    </li>
                </ul>
                <div class="search-open">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search">
                        <span class="input-group-btn">
                            <button class="btn-u" type="button">Go</button>
                        </span>
                    </div><!-- /input-group -->
                </div>
            </div><!-- /navbar-collapse -->
        </div>
    </div>
</div><!--/header-->



<!--=== End Header ===-->


<div class="breadcrumbs margin-bottom-10">
    <div class="container">
        <h2 class="pull-left">Resist the "Just in Case"</h2>
        <ul class="pull-right breadcrumb">
            <li><a href="/">Home</a></li>
            
            <li><a href="/blog">Blog</a></li>
            
        </ul>
    </div>
</div>


<!--=== Content Part ===-->
<div class="container">
<div class="row blog-page blog-item">
<!-- Left Sidebar -->
<div class="col-md-9 md-margin-bottom-60">
    <!--Blog Post-->
    <div class="blog margin-bottom-40">
        
        <div class="blog-post-tags">
            <ul class="list-unstyled list-inline blog-info">
                <li><i class="icon-calendar"></i> 08 Feb 2014</li>
                <li><i class="icon-pencil"></i> Mashooq Badar</li>
            </ul>
        </div>
        
        <p>Of all the projects I have worked on a big regret has been; adding complexity where it was not needed. I was recently reminded of, how easy it is to fall into that trap.</p>

<p>We are in the process of developing a new feature for a brand new system. As part of the feature we need to run a map reduce query on a data grid. We discovered that we could optimise the query if we maintained an in-memory cache.</p>

<p>The cache was pretty simple - backed by a a couple of hash maps. This part of the system is multithreaded and that is where we saw a possible race condition. So before we added synchronisation we wanted to force the race condition from our tests.</p>

<p>Reliably creating a race condition is obviously very tricky. We looked at the excellent <a href="http://www.cs.umd.edu/projects/PL/multithreadedtc/overview.html">MultithreadedTC</a> library but in this case it was not suitable. In the end we created a test from scratch that, although complicated, did the job. We added read/write locking to make the test pass. And we were done! We could feel good about ourselves.</p>

<p><strong>Hang on!</strong> We just added a a lot of complexity but for what? We made an assumption that the query will need optimisation. But does it really? We don not know until we have a performance environment to test the query with expected volumes. This is why we create premature optimisations because we shy away from creating a <strong>failing performance test</strong> before creating the optimisation. Often we don not even have a performance environment that is a good reflection of production and even if we do we are not always comfortable with writing performance tests. So we optimise <strong>just in case</strong> adding complexity where it is probably not required.</p>

<p>In our case we have removed this 'premature optimisation'. It is amazing how much code we manage to remove! We have communicated with our sponsor that there is a risk in this feature not performing under peak conditions and we need to create a performance environment along with the tests to understand if optimisation is needed. We also communicated that this performance environment will be required for subsequent features and forms an important part of our testing landscape. It is now on our backlog as a high priority.</p>

    </div>
    <!--End Blog Post-->
</div>
<!-- End Left Sidebar -->

<!-- Right Sidebar -->
<div class="col-md-3 magazine-page">
    <!-- Blog Latest Tweets -->
    <div class="blog-twitter margin-bottom-30">
        <a class="twitter-timeline" href="https://twitter.com/mashooq/codurance" data-widget-id="400789734676385792">Tweets from Codurance team</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </div>
    <!-- End Blog Latest Tweets -->
</div>
<!-- End Right Sidebar -->
</div>
<!--/row-->
</div>
<!--/container-->
<!--=== End Content Part ===-->


<!--=== Copyright ===-->
<div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <p class="copyright-space">
                    2013 &copy; Codurance LTD.
                     | Contact us: <a href="mailto:hello@codurance.com" class="">hello@codurance.com</a>
                </p>

            </div>
            <div class="col-md-6">
                <ul class="social-icons pull-right">
                    <li><a href="/atom.xml" data-original-title="Feed" class="social_rss"></a></li>
                    <li><a href="http://twitter.com/codurance" data-original-title="Twitter" class="social_twitter"></a></li>
                </ul>
            </div>
        </div> <!--/row-->
    </div> <!--/container-->
</div><!--/copyright-->

<!--=== End Copyright ===-->

<!-- JS Global Compulsory -->
<script type="text/javascript" src="/assets/plugins/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="/assets/plugins/jquery-migrate-1.2.1.min.js"></script>
<script type="text/javascript" src="/assets/plugins/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/assets/plugins/hover-dropdown.min.js"></script>
<script type="text/javascript" src="/assets/plugins/back-to-top.js"></script>
<!-- JS Implementing Plugins -->
<script type="text/javascript" src="/assets/plugins/flexslider/jquery.flexslider-min.js"></script>
<script type="text/javascript" src="/assets/plugins/parallax-slider/js/modernizr.js"></script>
<script type="text/javascript" src="/assets/plugins/parallax-slider/js/jquery.cslider.js"></script>
<!-- JS Page Level -->
<script type="text/javascript" src="/assets/js/app.js"></script>
<script type="text/javascript" src="/assets/js/pages/index.js"></script>
<script type="text/javascript">
    jQuery(document).ready(function () {
        App.init();
        App.initSliders();
        Index.initParallaxSlider();
    });
</script>
<!--[if lt IE 9]>
<script src="/assets/plugins/respond.js"></script>
<![endif]-->

</body>
</html>
